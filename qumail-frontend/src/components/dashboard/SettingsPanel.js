import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Button } from '../ui/Button';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/Card';
export const SettingsPanel = ({ isOpen, onClose, user }) => {
    const [activeTab, setActiveTab] = useState('account');
    const [keyManagerSettings, setKeyManagerSettings] = useState({
        autoRefresh: true,
        keyRotationInterval: 24,
        maxKeysPerSession: 100
    });
    const tabs = [
        {
            id: 'account',
            name: 'Account',
            icon: (_jsx("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" }) }))
        },
        {
            id: 'security',
            name: 'Security',
            icon: (_jsx("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" }) }))
        },
        {
            id: 'keymanager',
            name: 'Key Manager',
            icon: (_jsx("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" }) }))
        },
        {
            id: 'about',
            name: 'About',
            icon: (_jsx("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" }) }))
        }
    ];
    const handleLogout = () => {
        localStorage.removeItem('authToken');
        localStorage.removeItem('user');
        window.location.reload();
    };
    const renderAccountTab = () => (_jsxs("div", { className: "space-y-6", children: [_jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Profile Information" }) }), _jsxs(CardContent, { children: [user && (_jsxs("div", { className: "flex items-center space-x-4 mb-6", children: [user.picture ? (_jsx("img", { src: user.picture, alt: user.name, className: "w-16 h-16 rounded-full" })) : (_jsx("div", { className: "w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center", children: _jsx("span", { className: "text-white text-xl font-medium", children: user.name?.charAt(0) || user.email.charAt(0) }) })), _jsxs("div", { children: [_jsx("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white", children: user.name || user.email.split('@')[0] }), _jsx("p", { className: "text-gray-600 dark:text-gray-400", children: user.email })] })] })), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Display Name" }), _jsx("input", { type: "text", value: user?.name || '', className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white", placeholder: "Enter your display name" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Email Address" }), _jsx("input", { type: "email", value: user?.email || '', disabled: true, className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400" })] })] })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Account Actions" }) }), _jsx(CardContent, { children: _jsx("div", { className: "space-y-3", children: _jsxs(Button, { onClick: handleLogout, variant: "outline", className: "w-full justify-start text-red-600 border-red-300 hover:bg-red-50 dark:text-red-400 dark:border-red-600 dark:hover:bg-red-900/20", children: [_jsx("svg", { className: "w-4 h-4 mr-2", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" }) }), "Sign Out"] }) }) })] })] }));
    const renderSecurityTab = () => (_jsxs("div", { className: "space-y-6", children: [_jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Security Preferences" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "Always use Quantum Encryption" }), _jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Force all outgoing emails to use quantum encryption" })] }), _jsx("input", { type: "checkbox", defaultChecked: true, className: "w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "Require Recipient Verification" }), _jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Verify recipient identity before sending sensitive emails" })] }), _jsx("input", { type: "checkbox", defaultChecked: true, className: "w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "Auto-delete on Forward" }), _jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Automatically delete original when forwarding quantum emails" })] }), _jsx("input", { type: "checkbox", className: "w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" })] })] }) })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Encryption Standards" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-4", children: [_jsx("div", { className: "p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800", children: _jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-2 h-2 bg-green-500 rounded-full animate-pulse" }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-green-700 dark:text-green-300", children: "ETSI GS QKD-014 Compliant" }), _jsx("p", { className: "text-sm text-green-600 dark:text-green-400", children: "Quantum key distribution standards fully implemented" })] })] }) }), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg", children: [_jsx("p", { className: "text-sm font-medium text-purple-700 dark:text-purple-300", children: "Quantum Keys Available" }), _jsx("p", { className: "text-2xl font-bold text-purple-900 dark:text-purple-100", children: "6,400" })] }), _jsxs("div", { className: "p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg", children: [_jsx("p", { className: "text-sm font-medium text-blue-700 dark:text-blue-300", children: "Keys Used Today" }), _jsx("p", { className: "text-2xl font-bold text-blue-900 dark:text-blue-100", children: "23" })] })] })] }) })] })] }));
    const renderKeyManagerTab = () => (_jsxs("div", { className: "space-y-6", children: [_jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Key Management Configuration" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Key Rotation Interval (hours)" }), _jsx("input", { type: "number", value: keyManagerSettings.keyRotationInterval, onChange: (e) => setKeyManagerSettings(prev => ({
                                                ...prev,
                                                keyRotationInterval: parseInt(e.target.value)
                                            })), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Maximum Keys per Session" }), _jsx("input", { type: "number", value: keyManagerSettings.maxKeysPerSession, onChange: (e) => setKeyManagerSettings(prev => ({
                                                ...prev,
                                                maxKeysPerSession: parseInt(e.target.value)
                                            })), className: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white" })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "font-medium text-gray-900 dark:text-white", children: "Auto-refresh Keys" }), _jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Automatically refresh quantum keys when running low" })] }), _jsx("input", { type: "checkbox", checked: keyManagerSettings.autoRefresh, onChange: (e) => setKeyManagerSettings(prev => ({
                                                ...prev,
                                                autoRefresh: e.target.checked
                                            })), className: "w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" })] })] }) })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "KME Server Status" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-3 h-3 bg-green-500 rounded-full animate-pulse" }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-green-700 dark:text-green-300", children: "KME Server 1" }), _jsx("p", { className: "text-sm text-green-600 dark:text-green-400", children: "localhost:13000 - Online" })] })] }), _jsx("span", { className: "text-green-600 dark:text-green-400 text-sm font-medium", children: "Connected" })] }), _jsxs("div", { className: "flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "w-3 h-3 bg-green-500 rounded-full animate-pulse" }), _jsxs("div", { children: [_jsx("p", { className: "font-medium text-green-700 dark:text-green-300", children: "KME Server 2" }), _jsx("p", { className: "text-sm text-green-600 dark:text-green-400", children: "localhost:14000 - Online" })] })] }), _jsx("span", { className: "text-green-600 dark:text-green-400 text-sm font-medium", children: "Connected" })] })] }) })] })] }));
    const renderAboutTab = () => (_jsxs("div", { className: "space-y-6", children: [_jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "About QuMail" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "text-center space-y-4", children: [_jsx("div", { className: "w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto", children: _jsx("svg", { className: "w-8 h-8 text-white", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" }) }) }), _jsxs("div", { children: [_jsx("h3", { className: "text-2xl font-bold text-gray-900 dark:text-white", children: "QuMail v1.0.0" }), _jsx("p", { className: "text-gray-600 dark:text-gray-400", children: "Quantum-Secured Email Platform" })] }), _jsx("p", { className: "text-sm text-gray-600 dark:text-gray-400 max-w-md mx-auto", children: "The world's first quantum-secured email platform using real quantum key distribution for unbreakable encryption and perfect forward secrecy." })] }) })] }), _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "System Information" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-3 text-sm", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Protocol:" }), _jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: "ETSI GS QKD-014" })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Encryption:" }), _jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: "Quantum + AES-256" })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Key Distribution:" }), _jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: "QKD Active" })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Backend:" }), _jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: "FastAPI + Rust KME" })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-gray-600 dark:text-gray-400", children: "Frontend:" }), _jsx("span", { className: "font-medium text-gray-900 dark:text-white", children: "React + TypeScript" })] })] }) })] })] }));
    const renderTabContent = () => {
        switch (activeTab) {
            case 'account':
                return renderAccountTab();
            case 'security':
                return renderSecurityTab();
            case 'keymanager':
                return renderKeyManagerTab();
            case 'about':
                return renderAboutTab();
            default:
                return renderAccountTab();
        }
    };
    return (_jsx(AnimatePresence, { mode: "wait", children: isOpen && (_jsxs(_Fragment, { children: [_jsx(motion.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, transition: { duration: 0.15 }, onClick: onClose, className: "fixed inset-0 bg-black/60 z-40", style: { willChange: 'opacity' } }), _jsxs(motion.div, { initial: { x: 400 }, animate: { x: 0 }, exit: { x: 400 }, transition: { duration: 0.2, ease: [0.4, 0, 0.2, 1] }, className: "fixed right-0 top-0 h-full w-96 bg-white dark:bg-gray-800 shadow-2xl z-50 flex flex-col", style: { willChange: 'transform', transform: 'translateZ(0)' }, children: [_jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700", children: [_jsx("h2", { className: "text-xl font-semibold text-gray-900 dark:text-white", children: "Settings" }), _jsx(Button, { onClick: onClose, variant: "ghost", size: "sm", className: "text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200", children: _jsx("svg", { className: "w-5 h-5", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: _jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" }) }) })] }), _jsx("div", { className: "flex-shrink-0 border-b border-gray-200 dark:border-gray-700", children: _jsx("nav", { className: "flex space-x-1 p-4", children: tabs.map((tab) => (_jsxs("button", { onClick: () => setActiveTab(tab.id), className: `flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${activeTab === tab.id
                                        ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300'
                                        : 'text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700'}`, children: [tab.icon, _jsx("span", { children: tab.name })] }, tab.id))) }) }), _jsx("div", { className: "flex-1 overflow-y-auto p-6", children: renderTabContent() })] })] })) }));
};
